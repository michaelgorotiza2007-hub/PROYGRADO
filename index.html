<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LCP | Plataforma Integral</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>

    <div class="bg-gradient"></div>
    <div class="bg-grid"></div>

    <div id="toast-container" class="toast-container"></div>

    <div id="loader-screen">
        <div class="loader-content">
            <i class="fas fa-atom fa-spin logo-loader"></i>
            <h3>Cargando Sistema LCP...</h3>
        </div>
    </div>

    <div id="auth-container" class="view-container active">
        <div class="glass-card login-card">
            <div class="login-header">
                <i class="fas fa-graduation-cap"></i>
                <h1>Bienvenido</h1>
                <p>Ingrese sus credenciales institucionales</p>
            </div>
            <form id="login-form">
                <div class="input-group">
                    <i class="fas fa-envelope"></i>
                    <input type="email" id="login-email" placeholder="Correo Institucional" required>
                </div>
                <div class="input-group">
                    <i class="fas fa-lock"></i>
                    <input type="password" id="login-pass" placeholder="Contraseña" required>
                </div>
                <button type="submit" class="btn-primary">Iniciar Sesión</button>
            </form>
            <div class="login-footer">
                <small>Docentes y Administrativos: Ingreso directo.</small>
            </div>
        </div>
    </div>

    <div id="verification-container" class="view-container" style="display: none;">
        <div class="glass-card verify-card">
            <i class="fas fa-shield-alt shield-icon"></i>
            <h2>Verificación de Seguridad</h2>
            <p>Ingrese el <b>Código de Matrícula</b> proporcionado por administración para desbloquear su cuenta.</p>
            <form id="verify-form">
                <input type="text" id="verify-code" placeholder="Ej: LCP-2026-X99" maxlength="20" required>
                <button type="submit" class="btn-primary">Validar Acceso</button>
            </form>
            <button onclick="logout()" class="btn-text">Volver al Login</button>
        </div>
    </div>

    <div id="dashboard-container" class="dashboard-layout" style="display: none;">
        
        <aside class="sidebar">
            <div class="sidebar-header">
                <i class="fas fa-layer-group"></i> <span>LCP Virtual</span>
            </div>

            <div class="profile-mini">
                <div class="avatar-circle" id="sb-avatar">U</div>
                <div class="profile-text">
                    <h4 id="sb-name">Usuario</h4>
                    <span id="sb-role">Rol</span>
                </div>
            </div>

            <nav class="sidebar-nav">
                <ul class="nav-list student-only">
                    <li><a href="#" onclick="nav('stu-home')" class="active"><i class="fas fa-home"></i> Panel General</a></li>
                    <li><a href="#" onclick="nav('stu-classes')"><i class="fas fa-chalkboard"></i> Mis Clases</a></li>
                    <li><a href="#" onclick="nav('stu-tasks')"><i class="fas fa-tasks"></i> Tareas</a></li>
                    <li><a href="#" onclick="nav('stu-attendance')"><i class="fas fa-user-check"></i> Asistencias</a></li>
                    <li><a href="#" onclick="nav('stu-behavior')"><i class="fas fa-user-tag"></i> Comportamiento</a></li>
                    <li><a href="#" onclick="nav('stu-grades')"><i class="fas fa-book-open"></i> Cuaderno de Notas</a></li>
                    <li><a href="#" onclick="nav('stu-reports')"><i class="fas fa-file-alt"></i> Informes / Exámenes</a></li>
                </ul>

                <ul class="nav-list teacher-only">
                    <li><a href="#" onclick="nav('tea-home')"><i class="fas fa-home"></i> Inicio Docente</a></li>
                    <li><a href="#" onclick="nav('tea-courses')"><i class="fas fa-chalkboard-teacher"></i> Mis Cursos</a></li>
                    <li><a href="#" onclick="nav('tea-ai')"><i class="fas fa-robot"></i> Asistente IA (Exámenes)</a></li>
                </ul>

                <ul class="nav-list admin-only">
                    <li><a href="#" onclick="nav('adm-matricula')"><i class="fas fa-user-plus"></i> Matriculación</a></li>
                    <li><a href="#" onclick="nav('adm-teachers')"><i class="fas fa-chalkboard-teacher"></i> Gestión Docentes</a></li>
                    <li><a href="#" onclick="nav('adm-students')"><i class="fas fa-users"></i> Lista Estudiantes</a></li>
                    <li><a href="#" onclick="nav('adm-ai')"><i class="fas fa-brain"></i> Análisis IA</a></li>
                </ul>
            </nav>

            <div class="sidebar-footer">
                <button onclick="logout()" class="btn-logout"><i class="fas fa-sign-out-alt"></i> Salir</button>
            </div>
        </aside>

        <main class="main-content">
            <header class="top-bar">
                <h2 id="page-title">Panel de Control</h2>
                <div class="top-icons">
                    <div class="icon-wrapper" onclick="toggleNotifications()">
                        <i class="fas fa-bell"></i>
                        <span class="badge" id="notif-badge">0</span>
                        <div class="dropdown-menu" id="notif-dropdown">
                            <div class="dropdown-header">Notificaciones</div>
                            <div class="dropdown-body" id="notif-list">
                                <p class="empty-msg">No hay notificaciones nuevas</p>
                            </div>
                        </div>
                    </div>
                    <div class="icon-wrapper" onclick="toggleMessages()">
                        <i class="fas fa-envelope"></i>
                        <span class="badge">0</span>
                         <div class="dropdown-menu" id="msg-dropdown">
                            <div class="dropdown-header">Mensajes Administrativos</div>
                            <div class="dropdown-body">
                                <p class="empty-msg">Bandeja vacía</p>
                            </div>
                        </div>
                    </div>
                </div>
            </header>

            <div id="content-area">
                
                <section id="stu-home" class="section-view active">
                    <div class="student-profile-card glass-panel">
                        <div class="profile-header-img">
                            <img src="https://ui-avatars.com/api/?name=Estudiante&background=7c3aed&color=fff&size=150" id="stu-photo" alt="Perfil">
                        </div>
                        <div class="profile-details">
                            <h2 id="stu-full-name">Cargando Nombre...</h2>
                            <div class="details-grid">
                                <div class="detail-item"><i class="fas fa-layer-group"></i> <span id="stu-course">Curso: --</span></div>
                                <div class="detail-item"><i class="fas fa-calendar-alt"></i> <span id="stu-year">Año Lectivo: 2025-2026</span></div>
                                <div class="detail-item"><i class="fas fa-columns"></i> <span id="stu-parallel">Paralelo: A</span></div>
                                <div class="detail-item"><i class="fas fa-venus-mars"></i> <span id="stu-gender">Género: --</span></div>
                            </div>
                        </div>
                    </div>

                    <div class="calendar-container glass-panel">
                        <div class="calendar-header">
                            <h3><i class="far fa-calendar-check"></i> Actividades del Mes</h3>
                            <span id="current-month">Enero 2026</span>
                        </div>
                        <div class="calendar-grid" id="calendar-grid">
                            </div>
                    </div>
                </section>

                <section id="adm-matricula" class="section-view">
                    <div class="glass-panel">
                        <div class="panel-header">
                            <h3><i class="fas fa-file-signature"></i> Ficha de Matriculación</h3>
                        </div>
                        <form id="matricula-form" class="complex-form">
                            <div class="form-section">
                                <h4>Datos del Representante</h4>
                                <div class="grid-3">
                                    <input type="text" placeholder="Cédula" required>
                                    <input type="text" placeholder="Nombres" required>
                                    <input type="text" placeholder="Apellidos" required>
                                    <input type="date" placeholder="Fecha Nacimiento">
                                    <input type="email" placeholder="Correo Electrónico" required>
                                    <input type="tel" placeholder="Celular">
                                    <input type="text" placeholder="Nacionalidad">
                                    <input type="text" placeholder="Ciudad Nacimiento">
                                    <select><option>Estado Civil</option><option>Soltero</option><option>Casado</option></select>
                                    <input type="text" placeholder="Dirección Domicilio" class="full-width">
                                </div>
                            </div>

                            <div class="form-section">
                                <h4>Datos del Estudiante</h4>
                                <div class="grid-3">
                                    <input type="text" placeholder="Cédula Estudiante">
                                    <input type="text" id="mat-stu-name" placeholder="Nombres" required>
                                    <input type="text" id="mat-stu-lastname" placeholder="Apellidos" required>
                                    <div class="input-with-label">
                                        <label>Fecha Nacimiento</label>
                                        <input type="date" id="mat-stu-dob" onchange="calculateAge()">
                                    </div>
                                    <input type="text" id="mat-stu-age" placeholder="Edad (Auto)" readonly class="readonly">
                                    <select id="mat-stu-gender"><option value="M">Masculino</option><option value="F">Femenino</option></select>
                                    <select id="mat-stu-course">
                                        <option value="8vo">8vo Básica</option>
                                        <option value="9no">9no Básica</option>
                                        <option value="10mo">10mo Básica</option>
                                        <option value="1ero">1ero Bachillerato</option>
                                    </select>
                                </div>
                            </div>
                            
                            <button type="submit" class="btn-primary full-btn">Registrar y Generar Código</button>
                        </form>
                    </div>
                </section>

                <section id="tea-ai" class="section-view">
                    <div class="ai-layout">
                        <div class="glass-panel ai-chat">
                            <div class="panel-header">
                                <h3><i class="fas fa-robot"></i> Generador de Exámenes (Gemini)</h3>
                            </div>
                            <div class="chat-box" id="ai-chat-box">
                                <div class="ai-msg">Hola, soy tu asistente. ¿Qué examen o evaluación deseas crear hoy?</div>
                            </div>
                            <div class="chat-input">
                                <input type="text" id="ai-input" placeholder="Ej: Crea un examen de 5 preguntas sobre la Célula Animal para 9no año...">
                                <button onclick="askGemini('exam')"><i class="fas fa-paper-plane"></i></button>
                            </div>
                        </div>
                    </div>
                </section>
                
                <section id="stu-grades" class="section-view"><div class="glass-panel"><h3>Cuaderno de Notas</h3><p>Tabla detallada de notas aquí...</p></div></section>
                
            </div>
        </main>
    </div>

    <script type="module" src="script.js"></script>
</body>
</html>